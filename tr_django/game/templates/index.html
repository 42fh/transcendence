<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ft_transcendence</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>&#127955;</text></svg>">
</head>
<body>
    <h1>Initial view for transcendance</h1>
    <p id="websocker_textelement"></p>
</body>
</html>
<style>
    h1, p {font-family: sans-serif; margin: 10%;}
</style>
<script>
    const websocker_textelement = document.getElementById("websocker_textelement")
    const echo_websocket = new WebSocket("ws://localhost:8000/ws/echo/99099815");
    var echo_websocket_open = false
    echo_websocket.onopen = () => echo_websocket_open = true
    echo_websocket.onmessage = (incoming_message) => {
        websocker_textelement.innerHTML = (incoming_message.data)
    }

    function send_message() {
        if (echo_websocket_open)
            var time_string = Date.now().toString()
            var outgoing_message = {"message": "browser saying hi at time: " + time_string}
            echo_websocket.send(JSON.stringify(outgoing_message))
        }

    setInterval(send_message, 1000)
</script>